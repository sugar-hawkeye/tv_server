{% load static %}


{#<link href="{% static 'css/single_image_upload.css' %}" rel="stylesheet" type="text/css" />#}
{#<script src="{% static "js/single_image_upload.js" %}" type="text/javascript"></script>#}
<div class="fileupload">
    {% if icon %}
        <img  id="{{ name }}" src="{{ icon }}"  width="120px"; height="120px";>
    {% else %}
        <img  id="{{ name }}" src="{% static 'images/file_add_btn.png'%}" width="120px"; height="120px";>
    {% endif %}



    <input type="file" {% if id_key %} id="{{ id_key }}" {% endif %} name="{{ name }}" accept="image/*" onchange="{{ method }}"/>


</div>


<script>
     function {{ name }}() {
    if (typeof FileReader === 'undefined') {
        alert('Your browser does not support FileReader...');
        return;
    }
    var reader = new FileReader();

    reader.onload = function(e) {
        var img = document.getElementById("{{ name }}");
        img.src = this.result;

    }
    reader.readAsDataURL(document.getElementById("{{ id_key }}").files[0]);
}

</script>